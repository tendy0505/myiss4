!function(r){function t(){var e=r(".w4pl_active .w4pl_group_fields").outerHeight();r("#w4pl_list_options").css("minHeight",e)}r(document).on("w4pl/form_loaded",function(e){t(),r("#w4pl_orderby").trigger("change")}),r(document).ready(function(){r(document).trigger("w4pl/form_loaded",r("#w4pl_list_options"))}),r(document.body).on("change",".w4pl_field_compare",function(){-1!==r.inArray(r(this).val(),["IN","NOT IN","BETWEEN","NOT BETWEEN"])?r(this).parent("td").next("td").children(".item").show().children(".button").show():(r(this).parent("td").next("td").children(".item").hide().children(".button").hide(),r(this).parent("td").next("td").find(".item:first").show())}),r(document.body).on("click",".w4pl_clone_parent",function(e){var t=r(this).parent(".wpce_parent_item").clone();return r(this).parent(".wpce_parent_item").after(t),r(this).parent(".wpce_parent_item").parent().find(".w4pl_remove_parent").show(),!1}),r(document.body).on("click",".w4pl_remove_parent",function(e){var t=r(this);return 0==t.parent(".wpce_parent_item").siblings().length?t.hide():(r(".w4pl_remove_parent").show(),t.parent(".wpce_parent_item").remove()),!1}),r(document.body).on("change",".w4pl_onchange_lfr",function(){!function(e,t){r("#publish").addClass("disabled"),null===t&&(t="w4pl_field_group_type");null===e&&(e=r("#w4pl_list_options :input").serialize()+"&action=w4pl_list_edit_form_html");r("#w4pl_list_options").append('<div id="w4pl_lo"></div>'),r.post(ajaxurl,e,function(e){return r("#w4pl_list_options").replaceWith(e),r("#"+t).addClass("w4pl_active"),r(document).trigger("w4pl/form_loaded",r("#w4pl_list_options")),r("#publish").removeClass("disabled"),!1})}(null,r(this).parents(".w4pl_field_group").attr("id"))}),r(document.body).on("click",".w4pl_toggler",function(){return r(r(this).data("target")).toggle(),t(),!1}),r(document.body).on("change","#w4pl_orderby",function(){"meta_value"==r(this).val()||"meta_value_num"==r(this).val()?r("#orderby_meta_key_wrap").show():r("#orderby_meta_key_wrap").hide()}),r(document.body).on("click",".w4pl_group_title",function(){return r("#w4pl_list_options").height("auto"),r(".w4pl_field_group").removeClass("w4pl_active"),r(this).parent(".w4pl_field_group").addClass("w4pl_active"),r("#w4pl_tab_id").val(r(this).parent(".w4pl_field_group").attr("id")),t(),!1}),r(document.body).on("click","#w4pl_template_buttons a",function(e){return function(e,t){var n=document.getElementById(e),r=n.scrollTop,a=0,l=n.selectionStart||"0"==n.selectionStart?"ff":!!document.selection&&"ie";"ie"==l?(n.focus(),(_=document.selection.createRange()).moveStart("character",-n.value.length),a=_.text.length):"ff"==l&&(a=n.selectionStart);var i=n.value.substring(0,a),e=n.value.substring(a,n.value.length);{var _;n.value=i+t+e,a+=t.length,"ie"==l?(n.focus(),(_=document.selection.createRange()).moveStart("character",-n.value.length),_.moveStart("character",a),_.moveEnd("character",0),_.select()):"ff"==l&&(n.selectionStart=a,n.selectionEnd=a,n.focus())}n.scrollTop=r}("w4pl_template",r(this).data("code")),!1}),r(document).ready(function(){function e(){r("#w4pl_meta_query_table tbody tr").each(function(e,t){t=r(t);t.find(".wffi_w4pl_meta_query_key").attr("name","w4pl[meta_query][key]["+e+"]"),t.find(".wffi_w4pl_meta_query_compare").attr("name","w4pl[meta_query][compare]["+e+"]"),t.find(".wffi_w4pl_meta_query_value").attr("name","w4pl[meta_query][value]["+e+"][]"),t.find("td.values").attr("data-pos",e),r(this).replaceWith(t)})}function n(e){var t=e.children(".item"),n=e.data("pos");t.each(function(e,t){t=r(t);t.find("input").attr("name","w4pl[meta_query][value]["+n+"]["+e+"]"),r(this).replaceWith(t)})}r(document.body).on("click","#w4pl_meta_query_add_btn",function(){return r(r("#w4pl_meta_query_clone tbody").html()).appendTo("#w4pl_meta_query_table tbody"),e(),!1}),r(document.body).on("click",".w4pl_meta_query_remove_btn",function(){return r(this).parents("tr").remove(),e(),!1}),r(document.body).on("click",".w4pl_meta_query_value_add",function(){r(".w4pl_meta_query_value_del").show();var e=r(this).parent(".item").parent("td");return r(this).parent(".item").after(r("#w4pl_meta_query_value_clone").html()),n(e),!1}),r(document.body).on("click",".w4pl_meta_query_value_del",function(){r(".w4pl_meta_query_value_del").show();var e=r(this).parent(".item").parent("td"),t=r(this);return 1==e.children(".item").length?r(this).hide():(t.parent(".item").remove(),n(e)),!1}),r(document.body).on("change",".w4pl_meta_query_compare",function(){-1!=r.inArray(r(this).val(),["IN","NOT IN","BETWEEN","NOT BETWEEN"])?r(this).parent("td").next("td").children(".item").show().children(".w4pl_meta_query_value_add, .w4pl_meta_query_value_del").show():(r(this).parent("td").next("td").children(".item").hide().children(".w4pl_meta_query_value_add, .w4pl_meta_query_value_del").hide(),r(this).parent("td").next("td").find(".item:first").show())}),r(".w4pl_meta_query_compare").each(function(e,t){r(this).trigger("change")})}),r(document).ready(function(){function e(){r("#w4pl_tax_query_table tbody tr").each(function(e,t){t=r(t);t.find(".wffi_w4pl_tax_query_taxonomy").attr("name","w4pl[tax_query][taxonomy]["+e+"]").removeAttr("id"),t.find(".wffi_w4pl_tax_query_field").attr("name","w4pl[tax_query][field]["+e+"]").removeAttr("id"),t.find(".wffi_w4pl_tax_query_operator").attr("name","w4pl[tax_query][operator]["+e+"]").removeAttr("id"),t.find(".wffi_w4pl_tax_query_terms").attr("name","w4pl[tax_query][terms]["+e+"][]").removeAttr("id"),t.find("td.terms").attr("data-pos",e),r(this).replaceWith(t)})}function n(e){var t=e.children(".item"),n=e.data("pos");t.each(function(e,t){t=r(t);t.find("input").attr("name","w4pl[tax_query][terms]["+n+"]["+e+"]"),r(this).replaceWith(t)})}r(document.body).on("click","#w4pl_tax_query_add_btn",function(){return r(r("#w4pl_tax_query_clone tbody").html()).appendTo("#w4pl_tax_query_table tbody"),e(),!1}),r(document.body).on("click",".w4pl_tax_query_remove_btn",function(){return r(this).parents("tr").remove(),e(),!1}),r(document.body).on("click",".w4pl_tax_query_value_add",function(){r(".w4pl_tax_query_value_del").show();var e=r(this).parent(".item").parent("td");return r(this).parent(".item").after(r("#w4pl_tax_query_value_clone").html()),n(e),!1}),r(document.body).on("click",".w4pl_tax_query_value_del",function(){r(".w4pl_tax_query_value_del").show();var e=r(this).parent(".item").parent("td"),t=r(this);return 1==e.children(".item").length?r(this).hide():(t.parent(".item").remove(),n(e)),!1}),r(document.body).on("change",".w4pl_tax_query_operator",function(){-1!=r.inArray(r(this).val(),["IN","NOT IN"])?(console.log(r(this).val()),r(this).parents("tr").find(".w4pl_tax_query_terms_cell").children(".item").show().children(".w4pl_tax_query_value_add, .w4pl_tax_query_value_del").show()):(r(this).parents("tr").find(".w4pl_tax_query_terms_cell .item").hide().children(".w4pl_tax_query_value_add, .w4pl_tax_query_value_del").hide(),r(this).parents("tr").find(".w4pl_tax_query_terms_cell .item:first").show())}),r(".w4pl_tax_query_operator").each(function(e,t){r(this).trigger("change")})})}(jQuery);